# Git Snapshot

> Snapshot: 특정 시점에서 파일, 폴더 혹은 워크스페이스의 상태를 의미한다.
> 스냅샷을 통해 특정 시점에 어떤 파일에 어떤 내용이 기록되어 있었는지, 폴더 구조는 어땠는지 등 저장소의 모든 정보를 확인할 수 있다.
>
> Git에서는 새로운 버전을 기록하기 위한 명령어인 commit을 실행하면 스냅샷이 저장된다.

## Git은 Snapshot으로 관리된다.

> 기존 버전관리 시스템(서브버전, 퍼포스, SVN 등)과 Git의 큰 차이점은 **버전 데이터를 관리하는 방식**이다.

### 기존 버전관리 시스템

- 파일을 중심으로 파일이 변경된 내역을 관리한다.
- 데이터를 보는 관점이 **어떤 파일이 존재하고 각 파일이 시간에 따라 변경된 차이점**에 있게 된다.
- 이를 **Delta-based version control** 이라고 한다.

![](https://i.imgur.com/Z1bMd6Q.png)

- Version 1을 File A, File B, File C로 시작함.
- File A와 File C에 기능을 구현해서 Version 2를 완성함.
- **File A와 File C는 Version 1 대비해서 변경된 내용이 delta 1으로 저장된다.**
- **Version 2의 코드를 받아보려고 하면 원본인 File A와 File C에 변경 사항인 각각의 delta 1을 적용해서 받아온다.**
- 추가 예제) Version 5에서 C 파일의 내용은 Version 1의 원본으로부터 1, 2, 3 변화가 누적된 걸로 계산된다.

### Git의 버전관리 시스템

![](https://i.imgur.com/y7KlODy.png)

- **기존 버전관리 시스템과는 다르게 Git은 프로젝트 전체를 스냅샷 형태로 관리한다.**
  - 매 순간마다 프로젝트 전체를 사진찍어서 관리한다고 생각.
- **즉, 새로운 버전이 만들어질 때 해당 버전의 각 파일이 최종 상태 그대로 저장이 되어있다.**
- ex) Version 5의 경우 Version 4와 비교했을 때 A 파일에는 변화가 없다. 그래서 Version 4의 파일을 그대로 연결해서 가져오고, 변화가 있는 B 파일과 C 파일은 이 둘 각각의 최종 파일 내용이 그대로 저장되어 있는 것이다.

### 만약에 커밋이 몇 만개가 있는 Repository 라면?

- Delta 방식으로 다루게 된다면 Git에서 브랜치를 바꾸든 어떠한 작업을 할 때마다 각 파일들을 그것이 처음 만들어진 시점부터 변경사항들을 일일히 더해서 현재 내용을 계산해야함.
- **하지만, Git은 스냅샷 형태로 다뤄지기 때문에 현재 시점에 각 파일들이 Full로 저장되어 있기 때문에 편하다.**

### Git이 작고 빠를 수 있는 이유는?

- Git에서 커밋을 하게 되면 workspace 전체가 스냅샷으로 저장되지만 덩치가 배로 불어나지는 않는다.
- 마지막 커밋의 스냅샷만 통째로 저장하고 나머지 커밋에 대해서는 스냅샷과 스냅샷의 차이를 기록한 "델타"를 저장한다.

![](https://i.imgur.com/a14HoJ0.png)

- 이렇게 되면 마지막 스냅샷을 기준으로 특정 시점의 스냅샷을 만들 수 있다.
- 그리고 저장소의 크기도 자연스럽게 줄게 된다. 실제로 Git을 개발한 측에서는 VCS중 저장소 크기가 가장 작다고 주장한다.

---

### Reference

- [[git] git snapshot](https://coding-lks.tistory.com/162)
- [Git 심화 개념 (Snapshot, 분산 버전 관리, Git의 3가지 공간)](https://wookjongbackend.tistory.com/32)
